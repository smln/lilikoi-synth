#N canvas 889 834 634 487 10;
#X obj 108 112 tgl 15 0 empty empty U 17 7 0 10 -262144 -1 -1 1 1;
#X obj 157 113 tgl 15 0 empty empty U/D 17 7 0 10 -262144 -1 -1 0 1
;
#X obj 207 113 tgl 15 0 empty empty RAND 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 600 355 285 311 arpUpDown 0;
#X obj 128 211 sel 5;
#X obj 155 235 sel 0;
#X msg 17 231 -1;
#X msg 17 261 1;
#X obj 128 19 inlet;
#X obj 185 102 r \$0-arpSteps;
#X obj 54 282 outlet;
#X obj 128 183 max 0;
#X obj 185 132 moses 1;
#X obj 128 50 spigot 0;
#X msg 194 20 1;
#X obj 225 189 - 1;
#X obj 128 129 + 1;
#X obj 99 129 f;
#X obj 128 158 min;
#X connect 0 0 2 0;
#X connect 0 1 1 0;
#X connect 1 0 3 0;
#X connect 2 0 12 1;
#X connect 3 0 12 1;
#X connect 4 0 9 0;
#X connect 5 0 8 0;
#X connect 7 0 0 0;
#X connect 7 0 6 0;
#X connect 7 0 13 1;
#X connect 8 0 9 1;
#X connect 8 1 10 0;
#X connect 8 1 11 0;
#X connect 9 0 13 0;
#X connect 10 0 9 1;
#X connect 11 0 0 1;
#X connect 11 0 14 1;
#X connect 12 0 13 1;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 14 0 7 0;
#X restore 109 290 pd arpUpDown;
#N canvas 736 122 448 304 arpUp 1;
#X obj 187 15 inlet;
#X obj 244 125 r \$0-arpSteps;
#X text 56 259 [mod] or [%] would definitely have been an easier solution
here...;
#X obj 119 230 outlet;
#X obj 187 196 sel 5;
#X obj 187 125 f;
#X msg 148 94 0;
#X obj 245 149 moses 1;
#X obj 188 45 spigot;
#X msg 251 23 1;
#X obj 215 125 + 1;
#X obj 214 173 - 1;
#X obj 187 158 min;
#X connect 0 0 8 0;
#X connect 1 0 7 0;
#X connect 4 0 6 0;
#X connect 5 0 10 0;
#X connect 5 0 12 0;
#X connect 6 0 5 1;
#X connect 7 0 8 1;
#X connect 7 1 9 0;
#X connect 7 1 11 0;
#X connect 8 0 5 0;
#X connect 9 0 8 1;
#X connect 10 0 5 1;
#X connect 11 0 4 1;
#X connect 11 0 12 1;
#X connect 12 0 4 0;
#X connect 12 0 3 0;
#X restore 193 289 pd arpUp;
#N canvas 612 341 251 181 arpRandom 0;
#X obj 45 43 inlet;
#X obj 115 44 r \$0-arpSteps;
#X obj 45 92 random;
#X obj 45 132 outlet;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X restore 251 290 pd arpRandom;
#X obj 109 261 spigot;
#X obj 193 261 spigot;
#X obj 251 261 spigot;
#X text 272 82 master clock [bang(;
#N canvas 0 880 557 612 arpNoteLatcher 1;
#X obj 214 174 f;
#X obj 252 174 + 1;
#X obj 323 249 sel 127;
#X obj 253 295 tabread \$0-depressedNotes;
#X obj 21 232 tabwrite \$0-depressedNotes;
#X obj 218 435 tabwrite \$0-arpLatch;
#X obj 308 386 f;
#X obj 335 386 + 1;
#X obj 335 191 s \$0-arpSteps;
#X obj 41 510 table \$0-depressedNotes;
#X obj 77 535 table \$0-arpLatch;
#X text 188 510 an accurate account of depressed notes;
#X text 188 535 those notes ordered by pitch;
#X obj 173 16 inlet;
#X obj 173 58 unpack f f f;
#X obj 253 321 moses 1;
#X obj 21 206 pack f f;
#X obj 21 184 swap;
#X msg 323 270 0;
#X obj 321 87 sel 0;
#X msg 321 115 -1;
#X msg 354 115 1;
#X obj 214 198 t f f f;
#X msg 214 124 128;
#X obj 214 149 until;
#X msg 293 352 bang;
#X obj 218 381 f;
#X obj 233 352 + 1;
#X text 183 352 kludge:;
#X obj 321 140 +;
#X obj 350 140 f;
#X obj 321 163 max 0;
#X text 348 434 put it here.;
#X text 306 321 when not note off...;
#X text 319 64 # of depressed notes at any moment.;
#X text 34 124 scan all possible midi notes:;
#X connect 0 0 1 0;
#X connect 0 0 22 0;
#X connect 1 0 0 1;
#X connect 2 0 18 0;
#X connect 3 0 15 0;
#X connect 6 0 7 0;
#X connect 6 0 5 1;
#X connect 7 0 6 1;
#X connect 13 0 14 0;
#X connect 14 0 17 0;
#X connect 14 0 23 0;
#X connect 14 1 17 1;
#X connect 14 1 19 0;
#X connect 15 1 25 0;
#X connect 16 0 4 0;
#X connect 17 0 16 0;
#X connect 17 1 16 1;
#X connect 18 0 0 1;
#X connect 18 0 6 1;
#X connect 19 0 20 0;
#X connect 19 1 21 0;
#X connect 20 0 29 0;
#X connect 21 0 29 0;
#X connect 22 0 2 0;
#X connect 22 1 27 0;
#X connect 22 2 3 0;
#X connect 23 0 24 0;
#X connect 24 0 0 0;
#X connect 25 0 6 0;
#X connect 25 0 26 0;
#X connect 26 0 5 0;
#X connect 27 0 26 1;
#X connect 29 0 30 0;
#X connect 29 0 31 0;
#X connect 30 0 29 1;
#X connect 31 0 8 0;
#X restore 389 290 pd arpNoteLatcher;
#X obj -21 199 sel 1;
#X obj 29 199 sel 1;
#X obj 79 199 sel 1;
#X msg -21 226 0;
#X msg 29 226 0;
#X msg 79 226 0;
#N canvas 564 228 614 329 noteMaker 0;
#X obj 74 31 inlet;
#X obj 74 64 tabread \$0-arpLatch;
#X text 197 62 get latched note vals;
#X obj 74 185 poly 1 1;
#X obj 74 249 outlet;
#X text 131 185 yay \, monophony!;
#X obj 74 212 pack 0 0 0;
#X obj 119 88 tabread \$0-depressedNotes;
#X obj 74 119 pack f f;
#X text 281 89 read velocities and potentially poly aftertouch...;
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 1 0 8 0;
#X connect 3 0 6 0;
#X connect 3 1 6 1;
#X connect 3 2 6 2;
#X connect 6 0 4 0;
#X connect 7 0 8 1;
#X connect 8 0 3 0;
#X restore 109 349 pd noteMaker;
#X obj 109 391 outlet;
#X obj 389 259 spigot;
#X obj 324 343 spigot;
#X obj 357 289 - 1;
#X obj 323 392 outlet;
#X text 367 392 midithru?;
#X text -14 291 i can do arithmetic!;
#X text 389 309 collecting/sorting;
#X obj 371 158 inlet notes;
#X obj 276 111 inlet clock;
#X obj 109 62 loadbang;
#X connect 0 0 11 0;
#X connect 0 0 19 1;
#X connect 0 0 7 1;
#X connect 0 0 21 0;
#X connect 1 0 12 0;
#X connect 1 0 19 1;
#X connect 1 0 21 0;
#X connect 1 0 6 1;
#X connect 2 0 8 1;
#X connect 2 0 13 0;
#X connect 2 0 19 1;
#X connect 2 0 21 0;
#X connect 3 0 17 0;
#X connect 4 0 17 0;
#X connect 5 0 17 0;
#X connect 6 0 3 0;
#X connect 7 0 4 0;
#X connect 8 0 5 0;
#X connect 11 0 14 0;
#X connect 12 0 15 0;
#X connect 13 0 16 0;
#X connect 14 0 1 0;
#X connect 14 0 2 0;
#X connect 15 0 0 0;
#X connect 15 0 2 0;
#X connect 16 0 0 0;
#X connect 16 0 1 0;
#X connect 17 0 18 0;
#X connect 19 0 10 0;
#X connect 20 0 22 0;
#X connect 21 0 20 1;
#X connect 26 0 19 0;
#X connect 26 0 20 0;
#X connect 27 0 6 0;
#X connect 27 0 7 0;
#X connect 27 0 8 0;
#X connect 28 0 0 0;
#X coords 0 -1 1 1 150 40 2 100 100;
