#N canvas 0 96 1920 984 10;
#N canvas 0 50 450 250 (subpatch) 0;
#X array waveout 100 float 3;
#A 0 0.0285528 0.0233306 0.0177594 0.0121549 0.00679289 0.00181849
-0.00278469 -0.00714563 -0.0114079 -0.0156522 -0.0198868 -0.0240892
-0.0282452 -0.0323546 -0.0364219 -0.0404614 -0.0445188 -0.0486806 -0.0530466
-0.0576806 -0.0625739 -0.0676479 -0.0727806 -0.0778275 -0.0826258 -0.0870048
-0.0908335 -0.0941034 -0.0969961 -0.0998684 -0.10313 -0.107072 -0.111751
-0.116997 -0.122507 -0.127953 -0.133042 -0.137555 -0.141373 -0.144506
-0.147086 -0.149355 -0.151612 -0.154169 -0.15728 -0.161083 -0.165562
-0.170537 -0.175712 -0.180753 -0.185375 -0.189394 -0.192735 -0.195415
-0.197511 -0.199169 -0.200612 -0.202134 -0.204054 -0.206639 -0.210028
-0.214175 -0.218826 -0.223549 -0.227859 -0.231394 -0.234062 -0.236034
-0.237628 -0.239148 -0.240793 -0.242644 -0.244695 -0.246881 -0.249096
-0.251223 -0.253175 -0.254941 -0.256597 -0.25827 -0.260052 -0.26194
-0.263838 -0.265634 -0.267271 -0.268771 -0.270198 -0.271599 -0.272978
-0.274302 -0.275539 -0.276689 -0.277773 -0.27878 -0.279624 -0.280179
-0.280377 -0.280301 -0.28018 -0.28027;
#X coords 0 1 100 -1 200 140 1 0 0;
#X restore 1090 398 graph;
#X obj 1200 637 tabwrite~ waveout;
#X obj 1209 601 metro 100;
#X obj 1209 576 loadbang;
#X obj 395 68 r imagedarkfromcpp;
#X text 392 38 //bang if image is black;
#X obj 565 67 r imagewhitefromcpp;
#X text 564 41 //bang if image is white;
#X obj 509 424 r huemaxfromcpp;
#X text 585 389 //three dominant hues if not gray/white/black. //Values
range 0-180;
#X obj 679 420 r huesecondmaxfromcpp;
#X obj 850 418 r huethirdmaxfromcpp;
#X obj 926 73 r sceneobjectmovementfromcpp;
#X obj 1298 63 r cameramovedownfromcpp;
#X obj 1319 91 r cameramoveupfromcpp;
#X obj 1340 120 r cameramoveleftfromcpp;
#X obj 1365 145 r cameramoverightfromcpp;
#X text 1298 36 //bang signal if camera is moving a certain way;
#X obj 1386 171 r cameraspinningfromcpp;
#X obj 1649 89 r cppinitialized;
#X text 924 38 //movement of scene objects if camera is not moving
//ranges from 0-1;
#X text 1631 55 //bang sent when all params have been sent //at least
once;
#X obj 1092 575 catch~ \$0-output;
#N canvas 400 293 1440 720 drone_synth 0;
#X obj 190 587 outlet~;
#X obj 186 435 expr~ $v1 * abs($v2);
#X obj 298 393 osc~ 0.2;
#X text 132 19 //65.41 is low C;
#X obj 157 372 osc~ 111;
#X obj 132 110 r pianotrigger;
#X obj 130 132 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 168 180 + 1;
#X obj 130 151 f 0;
#X text 47 81 //comes from piano_note_gen \, when a new chord is triggered
;
#X obj 168 203 % 4;
#X obj 170 226 route 0 1 2 3;
#X obj 433 181 r significant_down_move;
#X obj 597 178 r significant_up_move;
#X obj 74 294 hsl 128 15 60 200 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X floatatom 70 326 5 0 0 0 - - -, f 5;
#X obj 507 323 line 111;
#X obj 462 431 r moveclock;
#X obj 556 525 spigot;
#X msg 584 467 0;
#X msg 535 492 1;
#X obj 863 285 r significant_left_move;
#X obj 1019 286 r significant_right_move;
#X obj 991 395 line 0.2;
#X text 565 440 //reset oscillators if no longer moving;
#X text 536 139 //change frequency of oscillator if camera moving up/down
;
#X text 889 249 //change lfo frequency of l/r move;
#X obj 462 454 t b b;
#X msg 443 270 101 250;
#X msg 596 274 142.6 250;
#X msg 525 583 111 250;
#X msg 590 586 0.2 1000;
#X msg 927 342 4 1000;
#X connect 1 0 0 0;
#X connect 2 0 1 1;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 7 0 8 1;
#X connect 7 0 10 0;
#X connect 8 0 7 0;
#X connect 10 0 11 0;
#X connect 12 0 28 0;
#X connect 13 0 29 0;
#X connect 14 0 4 0;
#X connect 14 0 15 0;
#X connect 16 0 4 0;
#X connect 17 0 27 0;
#X connect 18 0 30 0;
#X connect 18 0 31 0;
#X connect 19 0 18 1;
#X connect 20 0 18 1;
#X connect 21 0 32 0;
#X connect 22 0 32 0;
#X connect 23 0 2 0;
#X connect 27 0 20 0;
#X connect 27 1 18 0;
#X connect 28 0 16 0;
#X connect 28 0 19 0;
#X connect 29 0 16 0;
#X connect 29 0 19 0;
#X connect 30 0 16 0;
#X connect 31 0 23 0;
#X connect 32 0 23 0;
#X restore 359 538 pd drone_synth;
#X obj 204 333 mtof;
#X floatatom 204 356 5 0 0 0 - - -, f 5;
#X floatatom 203 288 5 0 0 0 - - -, f 5;
#X obj 535 930 dac~;
#X obj 536 902 clip~ -1 1;
#X obj 651 912 throw~ \$0-output;
#X obj 514 743 *~ 0.1;
#X text 668 311 //we want range 55 - 79 //24 possible values means
divide by 7.5 //then add 55;
#X obj 509 495 change;
#X obj 679 443 f;
#X obj 850 441 f;
#X obj 360 567 *~ 4;
#X text 263 297 //midi 67 or 391.995 Hz is Middle G //I want C Major
scale;
#X obj 654 577 piano_sampler;
#X text 906 487 //change range to 1-14;
#X obj 678 492 change;
#X obj 850 489 change;
#X obj 479 451 expr rint($f1 * 14 / 180) + 1;
#X obj 670 466 expr rint($f1 * 14 / 180) + 1;
#X obj 860 463 expr rint($f1 * 14 / 180) + 1;
#N canvas 180 263 1226 598 piano_note_gen 0;
#X obj 51 6 inlet hues;
#X obj 410 542 outlet notes;
#X obj 51 29 unpack f f f;
#X obj 450 156 delay;
#X obj 299 470 f;
#X obj 333 470 f;
#X obj 368 469 f;
#X obj 372 29 r cppinitialized;
#X text 133 31 //these are the 3 hue values 1-14;
#X obj 495 102 random 9000;
#X obj 495 125 + 1000;
#X obj 495 60 loadbang;
#X text 597 84 //every 1-10 seconds trigger a piano chord;
#X obj 425 65 t b b;
#X obj 362 331 t f b;
#X obj 362 360 delay;
#X obj 362 269 spigot 1;
#X obj 303 181 f 0;
#X obj 303 218 f 1;
#X obj 505 347 t f b;
#X obj 505 376 delay;
#X obj 505 285 spigot 1;
#X obj 446 197 f 0;
#X obj 446 234 f 1;
#X obj 657 346 t f b;
#X obj 662 382 delay;
#X obj 657 284 spigot 1;
#X obj 598 196 f 0;
#X obj 598 233 f 1;
#X text 720 238 //have a random delay for each note to be pressed after
main trigger;
#X obj 362 303 random 1000;
#X obj 505 319 random 1000;
#X obj 657 318 random 1000;
#X text 605 110 //@@@TODO maybe have this number be affected by CV
stuff?;
#X obj 625 145 s pianotrigger;
#X connect 0 0 2 0;
#X connect 2 0 4 1;
#X connect 2 1 5 1;
#X connect 2 2 6 1;
#X connect 3 0 13 0;
#X connect 3 0 16 0;
#X connect 3 0 21 0;
#X connect 3 0 26 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 3 0;
#X connect 7 0 16 0;
#X connect 7 0 21 0;
#X connect 7 0 26 0;
#X connect 9 0 10 0;
#X connect 9 0 34 0;
#X connect 10 0 3 1;
#X connect 11 0 9 0;
#X connect 13 0 9 0;
#X connect 13 1 3 0;
#X connect 14 0 15 1;
#X connect 14 1 15 0;
#X connect 14 1 17 0;
#X connect 15 0 4 0;
#X connect 15 0 18 0;
#X connect 16 0 30 0;
#X connect 17 0 16 1;
#X connect 18 0 16 1;
#X connect 19 0 20 1;
#X connect 19 1 20 0;
#X connect 19 1 22 0;
#X connect 20 0 23 0;
#X connect 20 0 5 0;
#X connect 21 0 31 0;
#X connect 22 0 21 1;
#X connect 23 0 21 1;
#X connect 24 0 25 1;
#X connect 24 1 25 0;
#X connect 24 1 27 0;
#X connect 25 0 28 0;
#X connect 25 0 6 0;
#X connect 26 0 32 0;
#X connect 27 0 26 1;
#X connect 28 0 26 1;
#X connect 30 0 14 0;
#X connect 31 0 19 0;
#X connect 32 0 24 0;
#X restore 654 549 pd piano_note_gen;
#X obj 654 524 pack f f f;
#X obj 89 533 cmbcym~;
#X text 27 34 //number of contours in image \, something like 0 - 100
;
#X obj 50 69 r contoursfromcpp;
#X obj 52 164 r huemaxfromcpp;
#X text 128 129 //three dominant hues if not gray/white/black. //Values
range 0-180;
#X obj 222 160 r huesecondmaxfromcpp;
#X obj 393 158 r huethirdmaxfromcpp;
#N canvas 39 257 1636 799 significant_movement_detector 0;
#X obj 601 36 r cameramovedownfromcpp;
#X obj 759 37 r cameramoveupfromcpp;
#X obj 906 37 r cameramoveleftfromcpp;
#X obj 1070 39 r cameramoverightfromcpp;
#X obj 1210 105 r cameraspinningfromcpp;
#X obj 367 108 metro 250;
#X obj 367 89 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 366 64 r cppinitialized;
#X obj 418 263 + 1;
#X obj 418 234 f 0;
#X text 457 236 //counter;
#X obj 367 132 f 0;
#X obj 375 280 >;
#X obj 159 82 loadbang;
#X obj 375 354 spigot;
#X obj 375 331 bang;
#X obj 159 106 f 2;
#X obj 375 303 change;
#X obj 375 377 s significant_down_move;
#X obj 627 294 + 1;
#X obj 627 265 f 0;
#X text 666 267 //counter;
#X obj 584 311 >;
#X obj 584 385 spigot;
#X obj 584 362 bang;
#X obj 584 334 change;
#X obj 584 408 s significant_up_move;
#X obj 749 593 + 1;
#X obj 749 564 f 0;
#X text 788 566 //counter;
#X obj 706 610 >;
#X obj 706 684 spigot;
#X obj 706 661 bang;
#X obj 706 633 change;
#X obj 1017 409 + 1;
#X obj 1017 380 f 0;
#X text 1056 382 //counter;
#X obj 974 426 >;
#X obj 974 500 spigot;
#X obj 974 477 bang;
#X obj 974 449 change;
#X obj 706 707 s significant_left_move;
#X obj 974 523 s significant_right_move;
#X obj 434 131 s moveclock;
#X obj 1237 242 + 1;
#X obj 1237 213 f 0;
#X text 1276 215 //counter;
#X obj 1194 259 >;
#X obj 1194 333 spigot;
#X obj 1194 310 bang;
#X obj 1194 282 change;
#X obj 1207 463 s significant_spin;
#X obj 1240 405 == 0;
#X obj 1208 435 spigot;
#X text 1312 392 //1 in 8 chance of meow sound if spinning;
#X obj 1111 216 / 2;
#X obj 1240 382 random 16;
#X text 149 41 //number of frames in a quarter second (6) of movement
we need to call it significant;
#X connect 0 0 9 0;
#X connect 1 0 20 0;
#X connect 2 0 28 0;
#X connect 3 0 35 0;
#X connect 4 0 45 0;
#X connect 5 0 11 0;
#X connect 5 0 43 0;
#X connect 5 0 56 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 8 0 9 1;
#X connect 9 0 8 0;
#X connect 9 0 12 0;
#X connect 11 0 9 0;
#X connect 11 0 20 0;
#X connect 11 0 28 0;
#X connect 11 0 35 0;
#X connect 11 0 45 0;
#X connect 12 0 14 1;
#X connect 12 0 17 0;
#X connect 13 0 16 0;
#X connect 14 0 18 0;
#X connect 15 0 14 0;
#X connect 16 0 12 1;
#X connect 16 0 22 1;
#X connect 16 0 30 1;
#X connect 16 0 37 1;
#X connect 16 0 55 0;
#X connect 17 0 15 0;
#X connect 19 0 20 1;
#X connect 20 0 19 0;
#X connect 20 0 22 0;
#X connect 22 0 23 1;
#X connect 22 0 25 0;
#X connect 23 0 26 0;
#X connect 24 0 23 0;
#X connect 25 0 24 0;
#X connect 27 0 28 1;
#X connect 28 0 27 0;
#X connect 28 0 30 0;
#X connect 30 0 31 1;
#X connect 30 0 33 0;
#X connect 31 0 41 0;
#X connect 32 0 31 0;
#X connect 33 0 32 0;
#X connect 34 0 35 1;
#X connect 35 0 34 0;
#X connect 35 0 37 0;
#X connect 37 0 38 1;
#X connect 37 0 40 0;
#X connect 38 0 42 0;
#X connect 39 0 38 0;
#X connect 40 0 39 0;
#X connect 44 0 45 1;
#X connect 45 0 44 0;
#X connect 45 0 47 0;
#X connect 47 0 48 1;
#X connect 47 0 50 0;
#X connect 48 0 53 0;
#X connect 49 0 48 0;
#X connect 50 0 49 0;
#X connect 52 0 53 1;
#X connect 53 0 51 0;
#X connect 55 0 47 1;
#X connect 56 0 52 0;
#X restore 947 198 pd significant_movement_detector;
#N canvas 676 194 855 759 watersounds 0;
#X obj 22 494 hip~ 500;
#X obj 22 515 hip~ 500;
#X obj 22 536 hip~ 500;
#X obj 22 473 lop~ 150;
#X obj 22 452 lop~ 100;
#X obj 100 65 noise~;
#X obj 100 23 loadbang;
#X obj 180 65 noise~;
#X obj 180 23 loadbang;
#X obj 100 86 /~ 2;
#X obj 100 107 +~ 0.5;
#X obj 180 86 /~ 2;
#X obj 180 107 +~ 0.5;
#X msg 100 44 seed 210;
#X msg 180 44 seed 214;
#X obj 359 65 noise~;
#X obj 359 23 loadbang;
#X obj 436 65 noise~;
#X obj 436 23 loadbang;
#X obj 359 86 /~ 2;
#X obj 359 107 +~ 0.5;
#X obj 436 86 /~ 2;
#X obj 436 107 +~ 0.5;
#X msg 359 44 seed 310;
#X msg 436 44 seed 314;
#X obj 22 430 hip~ 4000;
#X obj 144 227 noise~;
#X obj 264 248 pow~ 11;
#X obj 264 290 lop~ 500;
#X obj 144 248 pow~ 2;
#X obj 144 393 hip~ 3000;
#X obj 144 372 hip~ 3000;
#X obj 144 351 bp~ 6000 0.7;
#X obj 264 269 lop~ 1500;
#X obj 159 290 r \$0-s-mid-tgl-4;
#X obj 279 311 r \$0-s-low-tgl-4;
#X obj 144 269 *~ 0.08;
#X obj 144 311 *~ 1;
#X obj 264 332 *~ 1;
#X obj 144 414 *~ 0.25;
#X obj 22 130 running-water~ 500 3 1 20 20 3000 6000 12;
#X obj 22 156 running-water~ 500 6 2 10 20 2500 5000 6;
#X obj 22 182 running-water~ 3000 6 1 1 10 1000 2000 12;
#X obj 282 130 running-water~ 530 3 2 20 40 1250 2500 6;
#X obj 282 156 running-water~ 530 6 2 10 20 1500 3000 6;
#X obj 282 182 running-water~ 2120 9 2 2 10 1750 7000 3;
#X obj 282 222 running-water~ 2120 9 2 1 5 1000 500 6;
#X obj 22 578 outlet~;
#X obj 467 382 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 22 556 *~ 10000;
#X obj 467 347 loadbang;
#X obj 467 412 switch~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 49 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 9 0;
#X connect 6 0 13 0;
#X connect 7 0 11 0;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 40 1;
#X connect 11 0 12 0;
#X connect 12 0 40 2;
#X connect 13 0 5 0;
#X connect 14 0 7 0;
#X connect 15 0 19 0;
#X connect 16 0 23 0;
#X connect 17 0 21 0;
#X connect 18 0 24 0;
#X connect 19 0 20 0;
#X connect 20 0 43 1;
#X connect 21 0 22 0;
#X connect 22 0 43 2;
#X connect 23 0 15 0;
#X connect 24 0 17 0;
#X connect 25 0 4 0;
#X connect 26 0 29 0;
#X connect 26 0 27 0;
#X connect 27 0 33 0;
#X connect 28 0 38 0;
#X connect 29 0 36 0;
#X connect 30 0 39 0;
#X connect 31 0 30 0;
#X connect 32 0 31 0;
#X connect 33 0 28 0;
#X connect 34 0 37 1;
#X connect 35 0 38 1;
#X connect 36 0 37 0;
#X connect 37 0 32 0;
#X connect 38 0 32 0;
#X connect 39 0 25 0;
#X connect 40 0 41 0;
#X connect 40 1 41 1;
#X connect 40 2 41 2;
#X connect 41 0 42 0;
#X connect 41 1 42 1;
#X connect 41 2 42 2;
#X connect 42 0 25 0;
#X connect 43 0 44 0;
#X connect 43 1 44 1;
#X connect 43 2 44 2;
#X connect 44 0 45 0;
#X connect 44 1 45 1;
#X connect 44 2 45 2;
#X connect 45 0 46 0;
#X connect 45 1 46 1;
#X connect 45 2 46 2;
#X connect 46 0 25 0;
#X connect 48 0 51 0;
#X connect 49 0 47 0;
#X connect 50 0 48 0;
#X restore 849 534 pd watersounds;
#X obj 840 636 *~;
#X obj 900 563 r sceneobjectmovementfromcpp;
#X obj 900 586 moses 0;
#X obj 941 613 expr min(($f1*2) + 0.15 \, 1);
#X text 931 169 //detect significant camera movements;
#N canvas 478 232 603 447 meowsound 0;
#X obj 160 291 outlet~ meowwwww;
#X obj 119 28 r significant_spin;
#X obj 159 243 readsf~;
#X msg 159 220 open samples/meow.wav \, 1;
#X msg 254 108 1;
#X obj 159 189 spigot;
#X text 338 79 //meow at most every 3 seconds;
#X obj 119 51 t b b;
#X msg 163 119 0;
#X obj 254 78 metro 3000;
#X obj 254 52 loadbang;
#X obj 159 266 *~ 4;
#X connect 1 0 7 0;
#X connect 2 0 11 0;
#X connect 3 0 2 0;
#X connect 4 0 5 1;
#X connect 5 0 3 0;
#X connect 7 0 8 0;
#X connect 7 1 5 0;
#X connect 8 0 5 1;
#X connect 9 0 4 0;
#X connect 10 0 9 0;
#X connect 11 0 0 0;
#X restore 723 616 pd meowsound;
#X obj 260 771 r contoursfromcpp;
#X obj 251 845 *~ 1;
#X obj 260 794 expr 1 + max(1 - ($i1 / 32) \, 0);
#X text 225 740 //@@@todo volume affected by contours?;
#X obj 736 67 r saturationfromcpp;
#X text 744 42 //mean saturation 0-255;
#X obj 1167 832 switch~;
#X obj 1174 790 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1178 763 loadbang, f 9;
#N canvas 0 96 1920 984 saturation_filter 1;
#X obj 366 286 lowpass~;
#X obj 356 138 r saturationfromcpp;
#X obj 243 341 +~;
#X obj 366 309 /~ 2;
#X obj 218 276 lowpass~;
#X obj 298 71 inlet~;
#X obj 259 439 outlet~;
#X text 401 80 //add some filtering based on image saturation to make
it sound muffled when things are grey...;
#X obj 216 302 /~ 2;
#X obj 201 197 expr pow($f1 \, 2) * 2, f 24;
#X obj 201 245 line 1000;
#X msg 518 228 \$1 500;
#X obj 518 252 line 1;
#X text 435 229 //freq;
#X text 576 234 //q;
#X text 460 296 //more filtered mix;
#X text 88 292 //less filtered mix;
#X obj 385 256 line 1000;
#X msg 385 232 \$1 250;
#X msg 201 220 \$1 250;
#X obj 378 192 expr pow($f1 - 50 \, 2) \; $f1 / 32, f 24;
#X connect 0 0 3 0;
#X connect 1 0 9 0;
#X connect 1 0 20 0;
#X connect 2 0 6 0;
#X connect 3 0 2 1;
#X connect 4 0 8 0;
#X connect 5 0 0 0;
#X connect 5 0 4 0;
#X connect 8 0 2 0;
#X connect 9 0 19 0;
#X connect 10 0 4 1;
#X connect 11 0 12 0;
#X connect 12 0 0 2;
#X connect 17 0 0 1;
#X connect 18 0 17 0;
#X connect 19 0 10 0;
#X connect 20 0 18 0;
#X connect 20 1 11 0;
#X restore 514 819 pd saturation_filter;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 8 0 41 0;
#X connect 10 0 33 0;
#X connect 11 0 34 0;
#X connect 22 0 1 0;
#X connect 23 0 35 0;
#X connect 24 0 25 0;
#X connect 26 0 24 0;
#X connect 28 0 27 0;
#X connect 28 0 27 1;
#X connect 30 0 70 0;
#X connect 32 0 45 0;
#X connect 33 0 42 0;
#X connect 34 0 43 0;
#X connect 35 0 30 0;
#X connect 37 0 30 0;
#X connect 39 0 45 1;
#X connect 40 0 45 2;
#X connect 41 0 32 0;
#X connect 42 0 39 0;
#X connect 43 0 40 0;
#X connect 44 0 37 0;
#X connect 45 0 44 0;
#X connect 46 0 30 0;
#X connect 54 0 55 0;
#X connect 55 0 30 0;
#X connect 56 0 57 0;
#X connect 57 1 58 0;
#X connect 58 0 55 1;
#X connect 60 0 30 0;
#X connect 61 0 63 0;
#X connect 63 0 62 1;
#X connect 68 0 67 0;
#X connect 69 0 68 0;
#X connect 70 0 28 0;
#X connect 70 0 29 0;
